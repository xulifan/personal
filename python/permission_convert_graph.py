import os, sys, shutil
from os import listdir
from os.path import isfile, join


#
# python ./python_scripts/permission_convert_graph.py ~/Software/genymotion-2.3.0/genymotion/tools/output_2013_10s/ ./graph_2013_10s bad
#


permission=['ACCESS', 'ACCESSORY_FRAMEWORK', 'ACCESS_4G_STATE', 'ACCESS_ACCOUNTS', 'ACCESS_ALL_DOWNLOADS', 'ACCESS_ASSISTED_GPS', 'ACCESS_BACKGROUND_SERVICE', 'ACCESS_BLUETOOTH_SHARE', 'ACCESS_BOOKMARKS', 'ACCESS_BSCI_DRM', 'ACCESS_BUFFER', 'ACCESS_CACHE_FILESYSTEM', 'ACCESS_CDS_PROVIDER', 'ACCESS_CELL_ID', 'ACCESS_CHECKIN_PROPERTIES', 'ACCESS_CHECKIN_PROPERTTES', 'ACCESS_COARES_LOCATION', 'ACCESS_COARSE', 'ACCESS_COARSE_LOCATION', 'ACCESS_COARSE_UPDATES', 'ACCESS_CORSE_LOCATION', 'ACCESS_COURSE_LOCATION', 'ACCESS_DATA', 'ACCESS_DEVICE_STATS', 'ACCESS_DOWNLOAD_MANAGER', 'ACCESS_DOWNLOAD_MANAGER_ADVANCED', 'ACCESS_DRM', 'ACCESS_DYNAMIC_REFRESH', 'ACCESS_EVENTS', 'ACCESS_FIND_LOCATION', 'ACCESS_FINE_LOCATION', 'ACCESS_FINE_LOCATON', 'ACCESS_GPS', 'ACCESS_HIGH_LOCATION', 'ACCESS_INTENTS', 'ACCESS_KUGOU_SERVICE', 'ACCESS_LGDRM', 'ACCESS_LOCATION', 'ACCESS_LOCATION_EXTRA_COMMANDS', 'ACCESS_LOCATTON_MOCK_LOCATION', 'ACCESS_MATCH_CONTENT', 'ACCESS_MOCK_LOCATION', 'ACCESS_NET', 'ACCESS_NETWORK_CHANGE', 'ACCESS_NETWORK_STATE', 'ACCESS_NETWORK_watson', 'ACCESS_NORTON_SECURITY', 'ACCESS_PREFS', 'ACCESS_PRODUCTS', 'ACCESS_PROVIDER', 'ACCESS_PUSHAGENT', 'ACCESS_RANDOM', 'ACCESS_SENSITIVE_DATA', 'ACCESS_SERVICE', 'ACCESS_SHARED_DATA', 'ACCESS_STREAMING', 'ACCESS_SUPERUSER', 'ACCESS_SURFACE_FLINGER', 'ACCESS_TASKS', 'ACCESS_UNKNOWN', 'ACCESS_UPNP_DEVICE_PROVIDER', 'ACCESS_WEB_PAGES', 'ACCESS_WIFI_STATE', 'ACCESS_WIMAX_STATE', 'ACCESS_hGPS', 'ACCES_MOCK_LOCATION', 'ACCOUNT_INFO_READ', 'ACCOUNT_MANAGER', 'ACCOUNT_NOTICE', 'ACTION', 'ACTION_CALL', 'ACTION_CALL_PRIVILEGED', 'ACTION_EXTERNAL_APPLICATIONS_AVAILABLE', 'ACTION_IMAGE_CAPTURE', 'ACTION_PHONE_STATE_CHANGED', 'ACTIVITY', 'ACTIVITY_RECOGNITION', 'ADDON_BAR_BADGE', 'ADD_ACCOUNTS', 'ADD_SYSTEM_SERVICE', 'ADD_VOICEMAIL', 'ADVANCED_APPMODE', 'ALLSHARE_CAST_SERVICE', 'ALL_SERVICES', 'AMAZON_ACCOUNT_PROPERTY', 'ANDROID_POWER', 'ANSWER_PHONE', 'ANT', 'ANT_ADMIN', 'AOM_MESSAGE', 'AOM_RECEIVE', 'AOM_SEND', 'API', 'ASSESS_PHONE_STATE', 'AUDIOMANAGER_API', 'AUDIO_FILE_ACCESS', 'AUDIO_SERVICE', 'AUTHENTICATE_ACCOUNTS', 'AUTH_APP', 'AUTH_SDK', 'AUTO_SEND', 'Account', 'BACKUP', 'BAIDU_LOCATION_SERVICE', 'BATTERY_STATS', 'BEEM_SERVICE', 'BILLING', 'BIND_ACCESSIBILITY_SERVICE', 'BIND_APPWIDGET', 'BIND_DEVICE_ADMIN', 'BIND_INPUT_METHOD', 'BIND_REMOTEVIEWS', 'BIND_SERVICE', 'BIND_TEXT_SERVICE', 'BIND_UNLOCK_SERVICE', 'BIND_VPN_SERVICE', 'BIND_WALLPAPER', 'BLACKLISTED_USB_DEVICE', 'BLUETOOTH', 'BLUETOOTH_ADMIN', 'BMA_TOKEN_SERVICE', 'BOOT_COMPLETED', 'BRICK', 'BROADCA', 'BROADCAST', 'BROADCAST_BADGE', 'BROADCAST_MESSAGE', 'BROADCAST_PACKAGE_ADDED', 'BROADCAST_PACKAGE_REMOVED', 'BROADCAST_PUSH_MESSAGE', 'BROADCAST_SMS', 'BROADCAST_STICKY', 'BROADCAST_WAP_PUSH', 'C2D_MESSAGE', 'CALL', 'CALL_PHONE', 'CALL_PRIVILEGED', 'CALL_STATE_IDLE', 'CALL_STATE_OFFHOOK', 'CALL_STATE_RINGING', 'CAMER', 'CAMERA', 'CAMERA_ADDON', 'CAMERA_EXTENDED', 'CAMERA_UPLOAD_SETTINGS_READ', 'CAMERA_UPLOAD_SETTINGS_WRITE', 'CAPTURE_AUDIO_OUTPUT', 'CENTRAL_SERVICE_PERMISSION', 'CHAGNE_CONFIGURATION', 'CHANGE_4G_STATE', 'CHANGE_BACKGROUND_DATA_SETTING', 'CHANGE_CHANGE_STATE', 'CHANGE_COMPONENT_ENABLED_STATE', 'CHANGE_CONFIGRATION', 'CHANGE_CONFIGURATION', 'CHANGE_LOCALE', 'CHANGE_NETWORK_MODE', 'CHANGE_NETWORK_SATET', 'CHANGE_NETWORK_STATE', 'CHANGE_WIFI_AP_STATE', 'CHANGE_WIFI_MULTICAST_STATE', 'CHANGE_WIFI_STAT', 'CHANGE_WIFI_STATE', 'CHANGE_WIMAX_STATE', 'CHAT_INFO_ACCESS', 'CHECK_LICENSE', 'CHILD_SERVICE', 'CLEAR_APP_CACHE', 'CLEAR_APP_USER_DATA', 'CLEAR_CACHE_PERMISSION', 'CLEAR_MISSED_CALL', 'CLIENT_PERMISSION', 'CLOSEAPP', 'CMS_ACCESS', 'CMS_CALLBACK_ACCESS', 'COLLECT_METRICS', 'COLORDICT', 'COMMON', 'COMM_PERMISSION', 'CONFIG', 'CONFIGURE_SIP', 'CONFIG_SOFTKEYS', 'CONNECTIVITY_INTERNAL', 'CONTENT_NOTIFICATION_ACCESS', 'CONTENT_PROVIDER_ACCESS', 'CONTROL_LOCATION_UPDATES', 'COOLOTS', 'COOLOTS_CANADA', 'CRASHHANDLER', 'CROSS_PROCESS_BROADCAST_MANAGER', 'CUSTOMIZATION', 'CUSTOM_PREFERENCE_ACCESS', 'DATA', 'DATACENTER', 'DATA_TRAFFIC_SWITCH', 'DEFAULT_PERMISSION', 'DELETE_CACHE_FILES', 'DELETE_EXTERNAL_STORAGE', 'DELETE_MESSAGES', 'DELETE_PACKAGES', 'DEVICE_ADMIN_ENABLED', 'DEVICE_CONFIGURED_PERMISSION', 'DEVICE_POWER', 'DEVICE_STATE', 'DIAGNOSTIC', 'DIAL', 'DIRECT_MESSAGES', 'DISABLE_HDMI', 'DISABLE_KEYGUARD', 'DISABLE_STATUS_BAR', 'DMR', 'DOWNLOAD_NOTIFICATION', 'DOWNLOAD_WITHOUT_NOTIFICATION', 'DUMP', 'EBAY_USER_CONFIG', 'EXPAND_STATUS_BAR', 'EXTENSION', 'EXTENSION_PERMISSION', 'ExternalCommunityActions', 'ExternalNimbuzzAPISupport', 'ExternalNimbuzzActions', 'FACTORY_TEST', 'FB_APP_COMMUNICATION', 'FETCH_CONFIGURATION', 'FINE_LOCATION', 'FLAG_ACTIVITY_NEW_TASK', 'FLAG_GRANT_READ_URI_PERMISSION', 'FLAG_GRANT_WRITE_URI_PERMISSION', 'FLAG_KEEP_SCREEN_ON', 'FLASHLIGHT', 'FLOATWIN_SERVICE', 'FM_RADIO_RECEIVER', 'FORCE_BACK', 'FORCE_STOP_PACKAGES', 'FRIENDS_PICKER', 'FULL', 'FULL_SCREEN', 'FULL_WAKE_LOCK', 'GALLERY_PROVIDER', 'GET_ACCOUNTS', 'GET_BRANDING', 'GET_LIMIT_STATUS', 'GET_MAIN_SERVICE', 'GET_PACKAGE_SIZE', 'GET_QRCODE_INFO', 'GET_TASKS', 'GLOBAL_SEARCH', 'GLOBAL_SEARCH_CONTROL', 'GLOBAL_SYNC', 'GOOGLE_AUTH', 'GetuiService', 'GexinService', 'HANDLE_DEVICE_MESSAGE', 'HARDWARE_TEST', 'HEADSET_PLUG', 'HISTORY', 'HOME', 'HOMEPAGE', 'HOSTAPP_PERMISSION', 'IDLESCREEN_SERVICE', 'ILLUMINATION', 'IMAGE_PROVIDER', 'IMPORT', 'IMPORT_BLP_DATA', 'INBILLING', 'INFINITE_ACCESS', 'INJECT_EVENT', 'INJECT_EVENTS', 'INSTALL_APPLICATION', 'INSTALL_DRM', 'INSTALL_LOCATION_PROVIDER', 'INSTALL_PACKAGES', 'INSTALL_SHORTCUT', 'INTENT', 'INTERACT_ACROSS_USERS', 'INTERACT_ACROSS_USERS_FULL', 'INTERNAL', 'INTERNAL_BROADCAST', 'INTERNAL_PERMISSION', 'INTERNAL_SYSTEM_WINDOW', 'INTERNET', 'INTuERNET', 'Intent', 'JPUSH_MESSAGE', 'KD_RECEIVER', 'KILL_BACKGROUND_PROCESSES', 'KPNS_DEVICEID', 'KPNS_MESSAGE', 'KTPNS_MESSAGE', 'LG', 'LICENSING', 'LISTEN_CELL_LOCATION', 'LISTEN_SIGNAL_STRENGTH', 'LISTEN_SIGNAL_STRENGTHS', 'LIVE_SHARE', 'LIVE_SHARE_CANADA', 'LOAD_CONFIGURATION', 'LOCAL_FILE_MANAGER', 'LOCATION', 'LOCK_UNLOCK', 'MANAGE_ACCOUNTS', 'MANAGE_APP_TOKENS', 'MANAGE_NETWORK_POLICY', 'MANAGE_TABS', 'MANAGE_USB', 'MANAGE_USERS', 'MAPS_RECEIVE', 'MASTER_CLEAR', 'MEDIA_REMOVED_ACTION', 'MESSAGE', 'METRICS_PERMISSION', 'MIPUSH_RECEIVE', 'MMOAUTH_CALLBACK', 'MM_MESSAGE', 'MODE_WORLD_READABLE', 'MODE_WORLD_WRITEABLE', 'MODIFY_AUDIO_SETTINGS', 'MODIFY_PHONE_STATE', 'MOUNT_FORMAT_FILESYSTEMS', 'MOUNT_UNMOUNT_FIFESYSTEMS', 'MOUNT_UNMOUNT_FILESYSTEMS', 'MOVE_PACKAGE', 'MUSICSERVICE', 'MYTRACKS_NOTIFICATIONS', 'MY_SERVICE_PERMISSION', 'NETFLOW', 'NETWORK', 'NETWORK_OPERATOR_SETTINGS', 'NEUAPP_PUSH_SERVICE', 'NFC', 'NFCEE_ADMIN', 'NNI_MESSAGE', 'NORMAL', 'NOTIFICATION', 'NOTIFY', 'NO_SOFT_KEYS', 'NotificationService', 'OPEN_ACCESS', 'OPT_IN', 'OTHER_SERVICES', 'OWNER', 'PACKAGE_USAGE_STATS', 'PAYMENT_BROADCAST', 'PAYMENT_BROADCAST_PERMISSION', 'PERMISSION', 'PERMISSION_ADD_ACCOUNT', 'PERMISSION_NAME', 'PERMISSION_PUBLISH_SHARE', 'PERMISSION_READ_PREFS', 'PERMISSION_RUN_TASKS', 'PERM_COMIC', 'PERSISTENT_ACTIVITY', 'PERSONAL_MEDIA', 'PLUGIN', 'PLUGIN_PERMISSION', 'PLUG_IN_APPLICATION', 'PLUG_IN_DATA_SOURCE', 'PLUG_IN_EXTENSION', 'PLUG_IN_LICENSE', 'PLUG_IN_WALLPAPER_SET', 'PREFETCH', 'PRELOAD_WORKSPACE', 'PRERENDER_URL', 'PREVENT_POWER_KEY', 'PRIVATE_ACTIVITY', 'PRIVATE_PROVIDERS', 'PRIVATE_WIDGET', 'PROCESS_OUTGOING_CALLS', 'PUSH_MESSAGE', 'PUSH_SERVICE_PROVIDER', 'Player', 'QUICK_BAR', 'RAISED_THREAD_PRIORITY', 'READ', 'READ_ACCOUNT', 'READ_ANYDO_TASKS', 'READ_ATTACHMENT', 'READ_ATTACHMENT_PREVIEW', 'READ_BUDDY', 'READ_CALENDAR', 'READ_CALL_LOG', 'READ_CAMSCANNER', 'READ_CLOCK', 'READ_CONTACTS', 'READ_CONTENTS', 'READ_CONTENT_PROVIDER', 'READ_DATA', 'READ_DB', 'READ_EXTERNAL_STORAGE', 'READ_FRAME_BUFFER', 'READ_GMAIL', 'READ_GSERVICES', 'READ_HISTORY_BOOKMARKS', 'READ_INPUT_STATE', 'READ_INTERNAL_STORAGE', 'READ_KEY_DETAILS', 'READ_LOCAL_DB', 'READ_LOGIN_TOKEN', 'READ_LOGS', 'READ_MAIL', 'READ_MENTIONS', 'READ_MESSAGES', 'READ_MMS', 'READ_MY_DATA', 'READ_NETWORK_USAGE_HISTORY', 'READ_NOTIFICATIONS', 'READ_ONLY', 'READ_OWNER_DATA', 'READ_PERMISSION', 'READ_PHONE_SINTERNETWIFI_STATE', 'READ_PHONE_STAT', 'READ_PHONE_STATE', 'READ_PHtwo_STATE', 'READ_PROFILE', 'READ_SECURE_SETTINGS', 'READ_SETTINGS', 'READ_SMS', 'READ_SNAPTAX_DATA', 'READ_SOCIAL_STREAM', 'READ_SUBSCRIBE_CONTENT', 'READ_SYNC_SETTINGS', 'READ_SYNC_STATS', 'READ_TASKS', 'READ_TASK_DATA', 'READ_TRACK_DATA', 'READ_TWEETS', 'READ_USER_DICTIONARY', 'READ_WIFI_STATE', 'READ_WRITE_ALL_VOICEMAIL', 'READ_WRITE_BOOKMARK_FOLDERS', 'READ_WRITE_BUDDY_LIST_DATA', 'READ_WRITE_CONVERSATION_DATA', 'READ_WRITE_OWN_VOICEMAIL', 'READ_YOUNI', 'REBOOT', 'RECEIVE', 'RECEIVED_BOOT_COMPLETED', 'RECEIVER_RESULT', 'RECEIVE_ADM_MESSAGE', 'RECEIVE_BOOT_COMPLETE', 'RECEIVE_BOOT_COMPLETED', 'RECEIVE_BOOT_PERMISSION', 'RECEIVE_COMMNUNITY_NOTIFICATION', 'RECEIVE_DATA_MESSAGE', 'RECEIVE_MMS', 'RECEIVE_NOTIFICATION', 'RECEIVE_NOTIFICATIONS', 'RECEIVE_PACKAGE_ADDED', 'RECEIVE_SCHEDULE_FINISH', 'RECEIVE_SMS', 'RECEIVE_SMS_SUPER', 'RECEIVE_TOP_WINDOW_CHANGED', 'RECEIVE_USER_PRESENT', 'RECEIVE_WAP_PUSH', 'RECIVER', 'RECORDE_AUDIO', 'RECORD_AUDIO', 'RECORD_VIDEO', 'REENABLE_KEYGUARD', 'REGISTRATION', 'REMOTE_CONTROL', 'REMOTE_INTENT', 'REMOVE_PACKAGES', 'REORDER_TASKS', 'REPORT_SUPERUSER', 'REQUEST_ENABLE', 'REQUEST_SUPERUSER', 'RESTART_PACK', 'RESTART_PACKAGES', 'RESTRICTED', 'RESTRICT_SERVICE', 'RIDE_EXTERNAL_STORAGE', 'RITE_EXTERNAL_STORAGE', 'RKILL_BACKGROUND_PROCESSES', 'RUN_INSTRUMENTATION', 'RemoteService', 'SAFEMODE_ACCESS', 'SANDBOX', 'SAVES', 'SCAN', 'SCROBBLET_PRIVATE_SERVICE', 'SDCARD_WRITE', 'SEND', 'SENDMAIL', 'SENDTO', 'SEND_DATA_MESSAGE', 'SEND_DOWNLOAD_COMPLETED_INTENTS', 'SEND_EVENTS', 'SEND_NETEASE_POMELO_PUSH_SERVICE_NEWS', 'SEND_NOTIFY', 'SEND_RESPOND_VIA_MESSAGE', 'SEND_SMS', 'SEND_VIEW', 'SERVICE', 'SERVICE_CONTROLLER', 'SERVICE_PERMISSION', 'SESSION', 'SETTINGS', 'SET_ACTIVITY_WATCHER', 'SET_ALARM', 'SET_ALWAYS_FINISH', 'SET_ANIMATION_SCALE', 'SET_DEBUG_APP', 'SET_FLAG_EXPANDED_SOFTKEYS', 'SET_FLAG_NOSOFTKEYS', 'SET_NETFLOW_DATA', 'SET_ORIENTATION', 'SET_POINTER_SPEED', 'SET_PREFERRED_APPLICATIONS', 'SET_PROCESS_FOREGROUND', 'SET_PROCESS_LIMIT', 'SET_TIME', 'SET_TIME_ZONE', 'SET_WALLPAPER', 'SET_WALLPAPER_COMPONENT', 'SET_WALLPAPER_HINTS', 'SHARE', 'SHOWTIMES_UPDATE', 'SHOW_CONTENT_LIBRARY', 'SIGNAL_PERSISTENT_PROCESSES', 'SIGNATURE', 'SIM_STATE_READY', 'SMARTCARD', 'SMS_RECEIVED', 'SNOOZE', 'SPRINGBOARD_SERVICE', 'STANDARD', 'START_BACKGROUND_SERVICE', 'START_LOCKSCREEN', 'START_SERVICE', 'STATUS', 'STATUS_BAR', 'STATUS_BAR_SERVICE', 'STOP_APP_SWITCHES', 'STORAGE', 'STORE_ACCESS', 'SU', 'SUBSCRIBED_FEEDS_READ', 'SUBSCRIBED_FEEDS_WRITE', 'SYNC_PHOTO', 'SYNC_RECEIVER_ACCESS', 'SYNC_STATUS', 'SYSTEM_ALERT_WINDOW', 'SYSTEM_COMMUNICATION', 'SYSTEM_OVERLAY_WINDOW', 'Sensor', 'SettingsAppWidgetProvider', 'THEME', 'TITLE_BAR_ACTION', 'TOGGLE', 'TOS_ACKED', 'TRACK_NOTIFICATIONS', 'UAPUSH_MESSAGE', 'UNINSTALL_SHORTCUT', 'UNLOCK', 'UNLOCKER', 'UNREAD_STATUS', 'UNSTALL_SHORTCUT', 'UPDATE', 'UPDATE_APP_OPS_STATS', 'UPDATE_COUNT', 'UPDATE_DEVICE_STATE', 'UPDATE_DEVICE_STATS', 'UPDATE_SHORTCUT', 'USEFMRADIO', 'USERAGENT', 'USES_POLICY_FORCE_LOCK', 'USE_ALML', 'USE_CREDENTIALS', 'USE_DEVICE_CREDENTIALS', 'USE_DIRECT_CALL_ADDON', 'USE_PAGEONCE_DATA', 'USE_SIP', 'V1', 'VCAST_APPS_LICENSE_SERVICE', 'VENDOR_BUTTON', 'VIBRATE', 'VIBRATION', 'VIEW', 'VIRUS_SCAN', 'WAKE_LOCK', 'WALLET_INTERNAL', 'WIFI_LOCK', 'WIFI_STATE_CHANGED', 'WRITE', 'WRITE_APN_SETTINGS', 'WRITE_BUDDY', 'WRITE_CALENDAR', 'WRITE_CALL_LOG', 'WRITE_CAMSCANNER', 'WRITE_CLOCK', 'WRITE_CONTACTS', 'WRITE_DATA', 'WRITE_DB', 'WRITE_ENTITY', 'WRITE_EXTERNAL_STORAGE', 'WRITE_EXTERNAL_STOREAGE', 'WRITE_FRAME_BUFFER', 'WRITE_GMAIL', 'WRITE_GSERVICES', 'WRITE_HISTORY_BOOKMARKS', 'WRITE_INTERNAL_STORAGE', 'WRITE_LOCAL_DB', 'WRITE_LOGS', 'WRITE_MEDIA_STORAGE', 'WRITE_MMS', 'WRITE_NOTIFICATIONS', 'WRITE_OWNER_DATA', 'WRITE_PERMISSION', 'WRITE_PROFILE', 'WRITE_SCHEDULE', 'WRITE_SDCARD', 'WRITE_SECURE', 'WRITE_SECURES', 'WRITE_SECURE_SETTING', 'WRITE_SECURE_SETTINGS', 'WRITE_SETTINGS', 'WRITE_SMS', 'WRITE_SNAPTAX_DATA', 'WRITE_SOCIAL_STREAM', 'WRITE_SUBSCRIBE_CONTENT', 'WRITE_SYNC_SETTINGS', 'WRITE_SYNC_STATS', 'WRITE_TASKS', 'WRITE_TASK_DATA', 'WRITE_TRACK_DATA', 'WRITE_TWOO', 'WRITE_USER_DICTIONARY', 'WRITE_YOUNI', 'WU', 'YAHOO_INTER_APP', 'YNP_MESSAGE', 'YOUR_PERMISSION', 'accelerometer', 'access_zhangdan_db', 'agoo', 'autofocus', 'blogger', 'broadcast', 'camera', 'changed', 'chaton', 'doctor', 'error', 'finance', 'friends_online_presence', 'friends_status', 'ftue', 'goanna_mobile', 'gps', 'grandcentral', 'index', 'lh2', 'list', 'livewallpaper', 'local', 'lvlcheck', 'mail', 'mainService', 'multitouch', 'musicprovider', 'pEnd', 'pStart', 'permission', 'preferExternal', 'provider', 'provider_permission', 'proximity', 'pushnotify', 'read', 'receive_ctrl', 'receive_push_messages', 'receiver', 'runner', 'scoresharing', 'selectphoto', 'sendBroadcastPromission', 'signatureOrSystem', 'sync', 'task', 'utl_permission', 'wise', 'write', 'writely', 'youtube']

n_feat=len(permission)

input=sys.argv[1]
output=sys.argv[2]
input=input.rstrip('/')
output=output.rstrip('/')
if(os.path.isdir(output)!=True):
    os.mkdir(output,0755)
    
label=sys.argv[3]


for dirs in listdir(input):
    #print dirs
    apk_dir=input+'/'+dirs
    if os.path.isdir(apk_dir):
        files=listdir(apk_dir)
        feat_vect=[0 for i in range(n_feat)]
        
        if 'permission.out' in files:
            f=open(apk_dir+'/permission.out','r')
            lines=f.readlines()
            f.close()
            
            for line in lines:
                line=line.rstrip()
                line=line.split()
                real_permission=line[1].split('.')[-1]
                        
                if real_permission in permission:
                    feat_vect[permission.index(real_permission)]=1
                else:
                    print apk_dir,line[1],real_permission
            
            output_filename=output+'/'+label+'_'+dirs+'.txt'
            f_output=open(output_filename,'w')
            f_output.write("1 ")
            f_output.write(str(n_feat))
            f_output.write("\n")
            f_output.write(' '.join(str(i) for i in feat_vect))
            f_output.write("\n")
            f_output.write("0\n")
            f_output.close()


#permission_all.sort()
#print permission_all

#print len(permission_all)



              
            
    
    


